import Head from 'next/head'
import { getVgg, setVgg, DesignDocument, mockVggSdk } from '../../'
import { VggSdkType } from '@/../dist/basic_sdk';


export default function Home() {
  return (
    <>
      <Head>
        <title>VggSdk Demo</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
      </Head>
    </>
  )
}

function test0() {
  getVgg().then((vgg) => {
    console.debug('#vgg is: ', vgg);
  });

  setVgg({ foo: "bar" })

  getVgg().then((vgg) => {
    console.debug('#vgg is: ', vgg);
  });
}

async function test1() {
  // Given
  const fakeSdk: VggSdkType = {
    getDesignDocument() {
      const mockDocument = {
        level: 0,
        a: {
          level: 1,
          b: {
            level: 2,
            c: {
              level: 3,
              d: {
                level: 4
              }
            }
          }
        },
        array1: [1, 2, 3],
      };
      const mockDocumentString = JSON.stringify(mockDocument);
      return mockDocumentString;
    },
    addAt(path, value) {
      console.log('fakeSdk, addAt: ', path, value);
    },
    deleteAt(path) {
      console.log('fakeSdk, deleteAt: ', path);
    },
    updateAt(path, value) {
      console.log('fakeSdk, updateAt: ', path, value);
    },
  }
  mockVggSdk(fakeSdk);
  const sut = await DesignDocument.getDesignDocument();

  // When
  sut.array1.push('str1');
  // Then

  // When
  sut.a.b.c.d.k1 = {};
  // Then

  // When
  sut.a.b.c.d.k1.k2 = {};
  // Then
}

test1();